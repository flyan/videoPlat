# VideoPlat 管理台前端

## 概述

管理台前端提供了完整的系统管理功能，包括用户管理、会议室管理、录制管理和操作日志查看。

## 目录结构

```
frontend/src/
├── pages/admin/
│   ├── AdminLayout.jsx      # 管理台布局组件
│   ├── Dashboard.jsx        # 管理台首页（统计信息）
│   ├── Users.jsx            # 用户管理页面
│   ├── Rooms.jsx            # 会议室管理页面
│   ├── Recordings.jsx       # 录制管理页面
│   ├── OperationLogs.jsx    # 操作日志页面
│   └── index.js             # 导出文件
├── services/
│   └── admin.js             # 管理台 API 服务
└── store/
    └── adminStore.js        # 管理台状态管理
```

## 功能特性

### 1. 管理台首页 (Dashboard)
- 系统统计信息展示
  - 总用户数
  - 在线用户数
  - 活跃会议室数
  - 存储空间使用情况
- 在线用户列表（最近 10 条）
- 活跃会议室列表（最近 10 条）
- 自动刷新（每 30 秒）

### 2. 用户管理 (Users)
- 用户列表展示
  - 用户名、邮箱、角色、状态等信息
  - 支持分页、搜索、筛选
- 用户操作
  - 强制下线（仅在线用户）
  - 禁用/启用用户
  - 删除用户（不能删除管理员）
- 筛选功能
  - 按状态筛选（在线/离线）
  - 按角色筛选（管理员/用户/游客）
  - 关键词搜索（用户名或邮箱）

### 3. 会议室管理 (Rooms)
- 会议室列表展示
  - 会议室 ID、名称、创建者、参与人数等
  - 支持分页、搜索、筛选
- 会议室操作
  - 查看详情（参与者列表）
  - 强制关闭会议室（仅活跃会议室）
- 筛选功能
  - 按状态筛选（进行中/已结束）
  - 关键词搜索（会议室名称或 ID）

### 4. 录制管理 (Recordings)
- 录制列表展示
  - 文件名、会议室、创建者、时长、文件大小等
  - 支持分页、搜索、筛选
- 录制操作
  - 播放录制（在新窗口打开）
  - 删除录制
  - 批量删除
- 筛选功能
  - 日期范围筛选
  - 关键词搜索（文件名或会议室）

### 5. 操作日志 (OperationLogs)
- 日志列表展示
  - 操作人、操作类型、操作内容、IP 地址等
  - 支持分页、搜索、筛选
- 日志操作
  - 导出日志（Excel 格式）
- 筛选功能
  - 按操作类型筛选
  - 日期范围筛选
  - 关键词搜索（操作人或操作内容）

## 技术实现

### 状态管理
使用 Zustand 进行状态管理，主要状态包括：
- 系统统计数据
- 用户列表及加载状态
- 会议室列表及加载状态
- 录制列表及加载状态
- 操作日志列表及加载状态

### API 服务
所有 API 请求都通过 `services/admin.js` 统一管理，包括：
- 统计信息查询
- 用户管理（查询、强制下线、禁用、启用、删除）
- 会议室管理（查询、查看详情、强制关闭）
- 录制管理（查询、删除、批量删除）
- 操作日志（查询、导出）

### UI 组件
使用 Ant Design 组件库，主要组件包括：
- Layout（布局）
- Table（表格）
- Card（卡片）
- Button（按钮）
- Input（输入框）
- Select（下拉选择）
- Modal（对话框）
- Tag（标签）
- Statistic（统计数值）
- DatePicker（日期选择器）

## 路由配置

管理台路由采用嵌套路由结构：

```
/admin                    # 管理台布局
  ├── /                   # 首页（Dashboard）
  ├── /users              # 用户管理
  ├── /rooms              # 会议室管理
  ├── /recordings         # 录制管理
  └── /logs               # 操作日志
```

## 权限控制

- 只有角色为 `admin` 的用户才能访问管理台
- 非管理员访问管理台路由会被重定向到登录页
- 在 `App.jsx` 中通过 `useAuthStore` 检查用户角色

## 使用方法

### 1. 访问管理台
登录后，如果是管理员用户，可以通过以下方式访问管理台：
- 直接访问 `/admin` 路径
- 在主页添加管理台入口链接

### 2. 导航
使用左侧导航栏切换不同的管理功能页面。

### 3. 操作确认
所有危险操作（强制下线、禁用、删除等）都会弹出确认对话框，防止误操作。

### 4. 数据刷新
- 首页自动每 30 秒刷新一次
- 其他页面可以点击"刷新"按钮手动刷新

## 样式说明

- 使用 Ant Design 默认主题
- 侧边栏采用深色主题（dark）
- 内容区采用浅灰色背景（#f0f2f5）
- 响应式布局，支持移动端访问
- 表格支持横向滚动，适配小屏幕

## 注意事项

1. **权限检查**：确保后端 API 也进行了管理员权限检查
2. **数据安全**：删除操作不可恢复，需要二次确认
3. **性能优化**：大数据量时使用分页加载
4. **错误处理**：所有 API 调用都有错误处理和提示
5. **用户体验**：操作成功/失败都有明确的提示信息

## 后续优化建议

1. 添加实时数据推送（WebSocket）
2. 添加更多统计图表（使用 ECharts 或 Recharts）
3. 添加系统配置管理页面
4. 添加用户行为分析
5. 添加导出功能（用户列表、会议室列表等）
6. 添加批量操作功能
7. 添加操作日志详情查看
8. 添加数据可视化大屏

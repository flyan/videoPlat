# VideoPlat 测试问题清单（快速版）

## 🔴 核心问题

### 问题 1：后端版本错误（最严重）
- **现象**：所有新功能 API 返回 500 错误
- **原因**：运行的是旧版单体应用，不是新的模块化应用
- **影响**：管理台、视频调阅、WebSocket 全部无法使用
- **修复**：
  ```bash
  # 停止旧应用
  taskkill /PID 13124 /F

  # 编译新应用
  cd backend && mvn clean install

  # 启动新应用
  cd videoplat-application && mvn spring-boot:run
  ```

### 问题 2：JSON 编码错误
- **现象**：游客登录返回 "Invalid UTF-8 start byte 0xb2"
- **原因**：中文字符编码问题
- **影响**：游客登录功能
- **修复**：在 application.yml 添加 UTF-8 编码配置

### 问题 3：测试脚本问题
- **现象**：无法从响应中提取 Room ID
- **原因**：正则表达式或响应格式不匹配
- **影响**：自动化测试
- **修复**：调整测试脚本

---

## ✅ 正常功能
- ✅ 管理员登录（admin / admin123）
- ✅ 普通用户登录（user1 / user123）
- ✅ 健康检查

---

## ❌ 失败功能（共 11 项）
1. ❌ 游客登录（编码错误）
2. ❌ 获取系统统计（500）
3. ❌ 获取用户列表（500）
4. ❌ 获取在线用户（500）
5. ❌ 获取会议室列表（500）
6. ❌ 获取进行中的会议室（500）
7. ❌ 获取操作日志（500）
8. ❌ 权限控制测试（500）
9. ❌ 获取录制列表（500）
10. ❌ 获取存储统计（500）
11. ❌ 创建会议室（无法提取 ID）

---

## 📊 测试统计
- **通过**：2/13（15.4%）
- **失败**：11/13（84.6%）
- **根本原因**：后端应用版本错误

---

## 🔧 修复步骤（5 步）
1. ✅ 停止旧应用
2. ✅ 编译新应用（mvn clean install）
3. ✅ 配置环境变量（.env 文件）
4. ✅ 启动新应用（mvn spring-boot:run）
5. ✅ 重新测试（bash test-all-apis.sh）

---

## 📝 已创建的文档
1. **测试问题汇总.md** - 本文档
2. **测试问题报告.md** - 详细分析
3. **测试问题修复指南.md** - 完整修复步骤
4. **test-all-apis.sh** - 自动化测试脚本
5. **test-results.log** - 测试日志

---

**修复后预期**：所有测试通过率 100%（13/13）

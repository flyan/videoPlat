# 管理台前端快速开始指南

## 已创建的文件

### 1. 状态管理
- **E:\file\program\claude\videoPlat\frontend\src\store\adminStore.js**
  - 管理台状态管理（使用 Zustand）
  - 管理用户、会议室、录制、日志等数据状态

### 2. API 服务
- **E:\file\program\claude\videoPlat\frontend\src\services\admin.js**
  - 管理台 API 服务层
  - 包含所有管理台相关的 API 接口

### 3. 页面组件（5个）
- **E:\file\program\claude\videoPlat\frontend\src\pages\admin\AdminLayout.jsx**
  - 管理台布局组件
  - 包含侧边栏导航和顶部栏

- **E:\file\program\claude\videoPlat\frontend\src\pages\admin\Dashboard.jsx**
  - 管理台首页
  - 显示系统统计信息、在线用户、活跃会议室

- **E:\file\program\claude\videoPlat\frontend\src\pages\admin\Users.jsx**
  - 用户管理页面
  - 支持搜索、筛选、强制下线、禁用/启用、删除

- **E:\file\program\claude\videoPlat\frontend\src\pages\admin\Rooms.jsx**
  - 会议室管理页面
  - 支持搜索、筛选、查看详情、强制关闭

- **E:\file\program\claude\videoPlat\frontend\src\pages\admin\Recordings.jsx**
  - 录制管理页面
  - 支持搜索、筛选、播放、删除、批量删除

- **E:\file\program\claude\videoPlat\frontend\src\pages\admin\OperationLogs.jsx**
  - 操作日志页面
  - 支持搜索、筛选、导出

### 4. 其他文件
- **E:\file\program\claude\videoPlat\frontend\src\pages\admin\index.js**
  - 组件导出文件

- **E:\file\program\claude\videoPlat\frontend\src\pages\admin\README.md**
  - 详细的功能说明文档

### 5. 路由配置
- **E:\file\program\claude\videoPlat\frontend\src\App.jsx**
  - 已更新，添加了管理台路由配置
  - 包含权限检查（只有管理员可访问）

## 功能特性

### 管理台首页
- ✅ 系统统计信息（总用户数、在线用户、活跃会议室、存储空间）
- ✅ 在线用户列表（最近 10 条）
- ✅ 活跃会议室列表（最近 10 条）
- ✅ 自动刷新（每 30 秒）

### 用户管理
- ✅ 用户列表展示（分页、搜索、筛选）
- ✅ 强制用户下线
- ✅ 禁用/启用用户
- ✅ 删除用户（不能删除管理员）
- ✅ 按状态筛选（在线/离线）
- ✅ 按角色筛选（管理员/用户/游客）

### 会议室管理
- ✅ 会议室列表展示（分页、搜索、筛选）
- ✅ 查看会议室详情（参与者列表）
- ✅ 强制关闭会议室
- ✅ 按状态筛选（进行中/已结束）

### 录制管理
- ✅ 录制列表展示（分页、搜索、筛选）
- ✅ 播放录制（新窗口打开）
- ✅ 删除录制
- ✅ 批量删除
- ✅ 日期范围筛选

### 操作日志
- ✅ 日志列表展示（分页、搜索、筛选）
- ✅ 按操作类型筛选
- ✅ 日期范围筛选
- ✅ 导出日志（Excel 格式）

## 使用方法

### 1. 启动前端开发服务器
```bash
cd frontend
npm install  # 如果还没安装依赖
npm run dev
```

### 2. 访问管理台
- 使用管理员账号登录系统
- 访问 `http://localhost:5173/admin`
- 或在主页添加管理台入口链接

### 3. 路由结构
```
/admin                    # 管理台首页（Dashboard）
/admin/users              # 用户管理
/admin/rooms              # 会议室管理
/admin/recordings         # 录制管理
/admin/logs               # 操作日志
```

## 权限控制

管理台路由已配置权限检查：
- 只有 `role === 'admin'` 的用户可以访问
- 非管理员访问会被重定向到登录页
- 在 `App.jsx` 中实现

## 技术栈

- **React 18+** - UI 框架
- **Ant Design** - UI 组件库
- **Zustand** - 状态管理
- **React Router** - 路由管理
- **Axios** - HTTP 客户端

## 设计特点

1. **简洁现代**：采用 Ant Design 设计规范
2. **响应式布局**：支持桌面和移动端
3. **用户友好**：所有危险操作都有确认对话框
4. **实时更新**：首页自动刷新，保持数据最新
5. **错误处理**：完善的错误提示和加载状态
6. **权限控制**：严格的管理员权限检查

## 后端 API 要求

管理台前端需要后端提供以下 API 接口：

### 统计接口
- `GET /admin/statistics` - 获取系统统计信息

### 用户管理接口
- `GET /admin/users` - 获取用户列表
- `GET /admin/users/:id` - 获取用户详情
- `POST /admin/users/:id/logout` - 强制用户下线
- `POST /admin/users/:id/disable` - 禁用用户
- `POST /admin/users/:id/enable` - 启用用户
- `DELETE /admin/users/:id` - 删除用户

### 会议室管理接口
- `GET /admin/rooms` - 获取会议室列表
- `GET /admin/rooms/:id` - 获取会议室详情
- `POST /admin/rooms/:id/close` - 强制关闭会议室
- `POST /admin/rooms/:id/remove-user` - 从会议室移除用户

### 录制管理接口
- `GET /admin/recordings` - 获取录制列表
- `GET /admin/recordings/:id` - 获取录制详情
- `DELETE /admin/recordings/:id` - 删除录制
- `POST /admin/recordings/batch-delete` - 批量删除录制

### 操作日志接口
- `GET /admin/logs` - 获取操作日志列表
- `GET /admin/logs/export` - 导出操作日志

## 注意事项

1. **确保后端 API 已实现**：前端依赖后端提供的管理台 API
2. **权限检查**：后端也需要进行管理员权限验证
3. **数据格式**：确保后端返回的数据格式与前端期望一致
4. **错误处理**：后端应返回清晰的错误信息
5. **CORS 配置**：如果前后端分离部署，需要配置 CORS

## 下一步

1. **测试功能**：在开发环境测试所有功能
2. **对接后端**：确保前后端 API 接口一致
3. **添加入口**：在主页添加管理台入口链接
4. **优化体验**：根据实际使用情况优化交互
5. **添加更多功能**：如系统配置、数据可视化等

## 常见问题

### Q: 如何添加管理台入口？
A: 在主页（Home.jsx）添加一个链接或按钮，指向 `/admin` 路径，并且只对管理员显示。

### Q: 如何修改管理台主题？
A: 在 `AdminLayout.jsx` 中修改 Sider 的 `theme` 属性，或使用 Ant Design 的主题定制功能。

### Q: 如何添加新的管理功能？
A:
1. 在 `pages/admin/` 创建新的页面组件
2. 在 `services/admin.js` 添加对应的 API 接口
3. 在 `App.jsx` 添加路由配置
4. 在 `AdminLayout.jsx` 的菜单中添加导航项

### Q: 如何处理大数据量？
A: 所有列表都支持分页，后端应实现分页查询。前端通过 `page` 和 `size` 参数控制。

## 联系支持

如有问题，请查看：
- 详细文档：`frontend/src/pages/admin/README.md`
- 项目文档：`CLAUDE.md`
- API 文档：`http://localhost:8080/swagger-ui.html`
